## Graphite local_settings.py - Managed by Puppet

#####################################
# General Configuration #
#####################################
AUTO_REFRESH_INTERVAL = <%= @auto_refresh_interval %>
DATE_FORMAT = '<%= @date_format %>'
DEBUG = <%= @debug %>
LOG_CACHE_PERFORMANCE = <%= @log_cache_performance %>
LOG_RENDERING_PERFORMANCE = <%= @log_rendering_performance %>
LOG_ROTATION = <%= @log_rotation %>
LOG_ROTATION_COUNT = <%= @log_rotation_count %>
MAX_TAG_LENGTH = <%= @max_tag_length %>
SECRET_KEY = '<%= @secret_key %>'
TIME_ZONE = '<%= @time_zone %>'
URL_PREFIX = '<%= @url_prefix %>'

# In Django 1.5+ set this to the list of hosts your graphite instances is
# accessible as. See:
# https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-ALLOWED_HOSTS
#ALLOWED_HOSTS = [ '*' ]

# Override this to provide documentation specific to your Graphite deployment
#DOCUMENTATION_URL = "http://graphite.readthedocs.io/"

# If using RRD files and rrdcached, set to the address or socket of the daemon
#FLUSHRRDCACHED = 'unix:/var/run/rrdcached.sock'

<% if @memcached_enabled == true -%>
# This lists the memcached servers that will be used by this webapp.
# If you have a cluster of webapps you should ensure all of them
# have the *exact* same value for this setting. That will maximize cache
# efficiency. Setting MEMCACHE_HOSTS to be empty will turn off use of
# memcached entirely.
#
# You should not use the loopback address (127.0.0.1) here if using clustering
# as every webapp in the cluster should use the exact same values to prevent
# unneeded cache misses. Set to [] to disable caching of images and fetched data
MEMCACHE_HOSTS = [<%= @memcached_hosts.map{ |elt| "\"#{elt}\""}.join(",") %>]

# Metric data and graphs are cached for one minute by default. If defined,
# DEFAULT_CACHE_POLICY is a list of tuples of minimum query time ranges mapped
# to the cache duration for the results. This allows for larger queries to be
# cached for longer periods of times. All times are in seconds. If the policy is
# empty or undefined, all results will be cached for DEFAULT_CACHE_DURATION.
#DEFAULT_CACHE_DURATION = 60 # Cache images and data for 1 minute
DEFAULT_CACHE_DURATION = <%= @memcached_default_cache_duration %> # Cache images and data for 1 minute
#DEFAULT_CACHE_POLICY = [(0, 60), # default is 60 seconds
#                        (7200, 120), # >= 2 hour queries are cached 2 minutes
#                        (21600, 180)] # >= 6 hour queries are cached 3 minutes
#MEMCACHE_KEY_PREFIX = 'graphite'

# This lists the memcached options. Default is an empty dict.
# Accepted options depend on the Memcached implementation and the Django version. 
# Until Django 1.10, options are used only for pylibmc. 
# Starting from 1.11, options are used for both python-memcached and pylibmc.
#MEMCACHE_OPTIONS = { 'socket_timeout': 0.5 }
<% end -%>
